@inject INotificationHelper _notificationHelper;
@inject IRaidEventParticipationService _participationService;

<h2 class="mt-3">Your raid invites</h2>
@if (IsLoading)
{
    <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
}
else
{
    <section class="section-50">
        <div class="container w-100">
            @foreach (var invite in Invites)
            {
                <div class="notification-ui_dd-content">
                    <div class="notification-list">
                        <div class="notification-list_content">
                            <div class="notification-list_img">
                                <img src="https://i.imgur.com/zYxDCQT.jpg" alt="user">
                            </div>
                            <div class="notification-list-detail-and-buttons">
                                <div class="notification-list_detail text-black">
                                    <p><b>@invite.HostName</b> invited your character @invite.InvitedCharacterName for his @invite.RaidLocation (@invite.RaidDifficulty) event on @invite.RaidStartDate.</p>
                                </div>
                                <div class="confirmation-buttons">
                                    <button class="btn btn-danger">Reject</button>
                                    <button class="btn btn-success">Accept</button>
                                </div>
                            </div>
                           
                        </div>

                        <div class="notification-list_feature-img">
                            <img src="https://i.imgur.com/AbZqFnR.jpg" alt="Feature image">
                        </div>

                    </div>

                </div>
                <div class="text-center">
                    <a href="#!" class="dark-link">Load more activity</a>
                </div>
            }


        </div>
    </section>
}


@code {
    bool IsLoading { get; set; } = true;
    List<RaidInviteDto> Invites { get; set; } = new();
    SieveModel SieveModel { get; set; } = new()
        {
            Page = 1,
            PageSize = 5,
            Filters = string.Empty,
            Sorts = string.Empty
        };

    protected override async Task OnInitializedAsync()
    {

        var getInvitesResult = await _participationService.GetUserRaidInvites(SieveModel);
        if (!getInvitesResult.Success)
        {
            await _notificationHelper.ShowErrorNotification(getInvitesResult.Message);
        }
        Invites = getInvitesResult.Data;
        IsLoading = false;
    }
}
